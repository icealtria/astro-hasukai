---
import BaseLayout from "@/layouts/Home.astro";
import { getTagsInfo } from "@/utils/tags";
export async function getStaticPaths() {
  const tags = Array.from(getTagsInfo()).map(([tag, _count]) => tag);
  const res = tags.map((tag) => ({ params: { tag } }));
  return res;
}

const { tag } = Astro.params;
import { posts } from "@/utils/post";
import PostList from "@/components/PostList.astro";
import Headline from "@/components/Headline.astro";
import PageContainer from "@/components/PageContainer.astro";
import TagsCard from "@/components/Sidebar/TagsCard.astro";
const filtered_posts = posts.filter((post) => {
  return post.data.tags?.includes(tag);
});
---

<BaseLayout title={`æ ‡ç­¾: ${tag}`}>
  <Headline title={`Tag: ${tag}`} />
  <PageContainer>
    <TagsCard />
    <div class="h-[5px] border-b-2 bg-surface-container border-black"></div>
    <PostList posts={filtered_posts} big={true} />
  </PageContainer>
</BaseLayout>
